--- a/quickassist/qat/drivers/crypto/qat/qat_common/qdm.c
+++ b/quickassist/qat/drivers/crypto/qat/qat_common/qdm.c
@@ -202,12 +202,15 @@ int __init qdm_init(void)
 {
 	if (!qdm_iommu_present() || iommu_under_pt())
 		return 0;

 #if LINUX_VERSION_CODE < KERNEL_VERSION(3, 2, 0)
 	domain = iommu_domain_alloc();
-#else
-	domain = iommu_domain_alloc(&pci_bus_type);
+#elif LINUX_VERSION_CODE < KERNEL_VERSION(6, 14, 0)
+	domain = iommu_domain_alloc(&pci_bus_type);
+#else
+	/* For kernel 6.14+, use iommu_paging_domain_alloc which requires a device parameter */
+	/* Since we don't have a specific device here, we'll use NULL for now */
+	/* This may need to be adjusted based on the specific QAT device being used */
+	domain = iommu_paging_domain_alloc(NULL);
 #endif
 	if (!domain) {
 		pr_err("QAT: Failed to allocate a domain\n");
 		return -1;
